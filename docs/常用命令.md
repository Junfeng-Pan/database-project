

## 🛠️ openGauss (gsql) 常用命令速查表

### 1. 连接与退出

| 命令 | 说明 | 示例 | 备注 |
| --- | --- | --- | --- |
| **`\q`** | 退出数据库客户端 | `\q` | 回到 Linux 终端 |
| **`\c [库名]`** | 切换/连接数据库 | `\c campus_card` | 相当于“进大门” |
| **`\conninfo`** | 查看当前连接信息 | `\conninfo` | 显示当前连的是哪个库、哪个用户 |

### 2. 查看结构 (元命令)

这些命令都以反斜杠 `\` 开头，**不需要**加分号。

| 命令 | 说明 | 示例 | 备注 |
| --- | --- | --- | --- |
| **`\l`** | **查看所有数据库** | `\l` | List databases (是小写L) |
| **`\dn`** | **查看所有模式 (Schema)** | `\dn` | 显示当前库里有哪些“房间” |
| **`\dt`** | **查看当前模式下的表** | `\dt` | ⚠️ 只显示 `search_path` 里的表 |
| **`\dt [模式].*`** | 查看指定模式下的表 | `\dt campus.*` | 强制看 `campus` 里的表 |
| **`\d [表名]`** | **查看表结构** | `\d users` | 查看列名、类型、主键等 |
| **`\d+ [表名]`** | 查看详细表结构 | `\d+ users` | 比 `\d` 多显示注释、存储引擎等 |
| **`\du`** | 查看所有用户/角色 | `\du` | 查看用户权限 |

### 3. 模式 (Schema) 与 搜索路径 (Search Path)

这是你最关心的部分，这部分属于 SQL 语句，**结尾记得加分号 `;**`。

| 操作目标 | SQL 命令 | 说明 |
| --- | --- | --- |
| **查看当前路径** | `SHOW search_path;` | 查看当前默认去哪些模式找表 |
| **设置当前路径** | `SET search_path TO campus, public;` | **本次会话有效**。设置后 `\dt` 直接能看到 `campus` 的表 |
| **永久设置路径** | `ALTER USER omm SET search_path TO campus, public;` | **永久生效**。下次登录自动应用该设置 |
| **创建模式** | `CREATE SCHEMA campus;` | 创建一个新的“房间” |

### 4. 执行与实用工具

| 命令 | 说明 | 示例 | 备注 |
| --- | --- | --- | --- |
| **`\i [文件路径]`** | **执行 SQL 脚本文件** | `\i /opt/sql/init.sql` | 导入外部 SQL 文件 |
| **`\x`** | 开启/关闭 **扩展展示** | `\x` | 当列太多一行显示不下时，开启后变成竖排显示 |
| **`! [命令]`** | 执行 Linux 系统命令 | `! ls /tmp` | 不退出数据库查看系统文件 |
| **`\?`** | 查看 gsql 命令帮助 | `\?` | 忘了命令时查一下 |
| **`\h [SQL命令]`** | 查看 SQL 语法帮助 | `\h CREATE TABLE` | 忘了建表语句怎么写时查一下 |

---

### 💡 给你的特别操作建议

针对你现在的 `campus_card` 项目，建议你每次登录后，肌肉记忆般地确认以下三点：

1. **进对房**：
```sql
\c campus_card

```


2. **配好眼镜 (设置路径)**：
```sql
SET search_path TO campus, public;

```


3. **确认环境**：
```sql
\dt

```


*(看到 `users`, `cards` 等表出现，就可以开始干活了)*
